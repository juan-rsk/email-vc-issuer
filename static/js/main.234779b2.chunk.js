(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{218:function(e,t,n){},233:function(e,t){},273:function(e,t){},275:function(e,t){},284:function(e,t){},286:function(e,t){},312:function(e,t){},313:function(e,t){},318:function(e,t){},320:function(e,t){},327:function(e,t){},339:function(e,t){},493:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(12),c=n.n(a),i=n(210),s=n.n(i),o=(n(218),n(21)),l=n(211),d=n.n(l),b=n(212),u=n.n(b),j=n(69),h=n.n(j),p=function(){return Object(r.jsx)("nav",{className:"navbar navbar-expand-md navbar-light bg-light fixed-top",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("a",{className:"navbar-brand",href:"https://rifos.org",target:"_blank",rel:"noreferrer",children:Object(r.jsx)("img",{src:"https://rifos.org/assets/img/logo.svg",className:"logo",alt:"logo"})}),Object(r.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(r.jsx)("span",{className:"navbar-toggler-icon"})}),Object(r.jsx)("div",{className:"collapse navbar-collapse",id:"navbarsExampleDefault",children:Object(r.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("a",{className:"nav-link",href:"https://developers.rsk.co/rif/identity",target:"_blank",rel:"noreferrer",children:"RIF Identity docs"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("a",{className:"nav-link",href:"https://github.com/rsksmart/email-vc-issuer",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("a",{className:"nav-link",href:"https://developers.rsk.co/rif/identity/about",target:"_blank",rel:"noreferrer",children:"Contact"})})]})})]})})},f="https://email-vc-issuer.staging.rifcomputing.net",m=new d.a({cachedProvider:!1,providerOptions:{walletconnect:{package:u.a,options:{rpc:{1:"https://mainnet.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0",30:"https://public-node.rsk.co",31:"https://public-node.testnet.rsk.co"}}}},supportedChains:[31]}),O=function(e){return function(t){return e(t.target.value)}},g=function(e){return"did:ethr:rsk:testnet:".concat(e)};var v=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(null),s=Object(o.a)(i,2),l=s[0],d=s[1],b=Object(a.useState)(null),u=Object(o.a)(b,2),v=u[0],x=u[1],y=Object(a.useState)(""),N=Object(o.a)(y,2),k=N[0],S=N[1],w=Object(a.useState)(""),C=Object(o.a)(w,2),E=C[0],_=C[1],q=Object(a.useState)(!1),I=Object(o.a)(q,2),P=I[0],V=I[1],F=Object(a.useState)(""),M=Object(o.a)(F,2),T=M[0],D=M[1],J=Object(a.useState)(""),R=Object(o.a)(J,2),U=R[0],A=R[1],B=Object(a.useState)(!1),G=Object(o.a)(B,2),K=G[0],L=G[1],W=k?g(k):"",z=function(e){return c(e?e.message:"Unhandled error")};return Object(r.jsxs)("div",{children:[Object(r.jsx)(p,{}),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col",children:[Object(r.jsx)("h1",{children:"Email VC Issuer"}),n&&Object(r.jsxs)("p",{children:["Error: ",n]}),Object(r.jsx)("h3",{children:"1. Enable wallet"}),Object(r.jsx)("button",{onClick:function(){return m.connect().then((function(e){d(e),e.request({method:"eth_accounts"}).then((function(t){S(t[0]);var n=g(t[0]),r="https://identity.staging.rifcomputing.net",a=new h.a({authManager:new j.AuthManager({did:n,serviceUrl:r,personalSign:function(n){return e.request({method:"personal_sign",params:[t[0],n]})}}),encryptionManager:new j.EncryptionManager({getEncryptionPublicKey:function(){return e.request({method:"eth_getEncryptionPublicKey",params:[t[0]]})},decrypt:function(n){return e.request({method:"eth_decrypt",params:[n,t[0]]})}}),serviceUrl:r});x(a)}))})).catch(z)},className:"btn btn-primary",children:"enable"}),Object(r.jsx)("p",{children:k}),Object(r.jsx)("p",{children:W})," ",Object(r.jsx)("h3",{children:"2. Request email verification"}),Object(r.jsxs)("div",{className:"input-group",children:[Object(r.jsx)("input",{type:"email",value:E,onChange:O(_),disabled:!k,placeholder:"Email address",className:"form-control"}),Object(r.jsx)("div",{className:"input-group-append",children:Object(r.jsx)("button",{id:"request",onClick:function(){return fetch("".concat(f,"/requestVerification/")+W,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({emailAddress:E})}).then((function(){V(!0)})).catch(z)},disabled:!k,className:"btn btn-primary",children:"request"})})]}),Object(r.jsx)("p",{children:P&&"Email sent"}),Object(r.jsx)("h3",{children:"3. Verify your email"}),Object(r.jsxs)("div",{className:"input-group",children:[Object(r.jsx)("input",{type:"text",value:T,onChange:O(D),disabled:!P,placeholder:"Verification code",className:"form-control"}),Object(r.jsx)("div",{className:"input-group-append",children:Object(r.jsx)("button",{onClick:function(){return l.request({method:"personal_sign",params:[k,"Verification code: ".concat(T)]}).then((function(e){return fetch("".concat(f,"/verify/")+W,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({sig:e})})})).then((function(e){return e.json()})).then((function(e){var t=e.jwt;A(t)})).catch(z)},disabled:!P,className:"btn btn-primary",children:"verify"})})]}),Object(r.jsx)("p",{style:{wordWrap:"break-word"},children:U}),Object(r.jsx)("h3",{children:"4. Store it in your Data Vault"}),Object(r.jsx)("button",{onClick:function(){return v.create({key:"EmailVerifiableCredential",content:U}).then((function(){L(!0)})).catch(z)},disabled:!U,className:"btn btn-primary",children:"save"}),Object(r.jsx)("p",{style:{wordWrap:"break-word"},children:K&&"Saved!"}),Object(r.jsx)("h3",{children:"5. Validate in RIF Id Manager"}),Object(r.jsxs)("p",{children:["Go to the ",Object(r.jsx)("a",{href:"https://rsksmart.github.io/rif-identity-manager/",target:"_blank",rel:"noreferrer",children:"RIF Identity Manager"})]})]})})})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,495)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root")),x()}},[[493,1,2]]]);
//# sourceMappingURL=main.234779b2.chunk.js.map