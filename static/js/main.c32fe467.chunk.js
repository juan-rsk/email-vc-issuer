(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{216:function(e,t,n){},227:function(e,t){},281:function(e,t){},283:function(e,t){},292:function(e,t){},294:function(e,t){},320:function(e,t){},321:function(e,t){},326:function(e,t){},328:function(e,t){},335:function(e,t){},348:function(e,t){},518:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n.n(r),c=n(209),i=n.n(c),s=(n(216),n(19)),o=n(210),l=n.n(o),d=n(211),b=n.n(d),u=n(66),j=n.n(u),h=n(1),p=function(){return Object(h.jsx)("nav",{className:"navbar navbar-expand-md navbar-light bg-light fixed-top",children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"https://rifos.org",target:"_blank",rel:"noreferrer",children:Object(h.jsx)("img",{src:"https://rifos.org/assets/img/logo.svg",className:"logo",alt:"logo"})}),Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarsExampleDefault",children:Object(h.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",href:"https://developers.rsk.co/rif/identity",target:"_blank",rel:"noreferrer",children:"RIF Identity docs"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",href:"https://github.com/rsksmart/email-vc-issuer",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",href:"https://developers.rsk.co/rif/identity/about",target:"_blank",rel:"noreferrer",children:"Contact"})})]})})]})})},f="https://email-vc-issuer.staging.rifcomputing.net",m=new l.a({cachedProvider:!1,providerOptions:{walletconnect:{package:b.a,options:{rpc:{1:"https://mainnet.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0",30:"https://public-node.rsk.co",31:"https://public-node.testnet.rsk.co"}}}},supportedChains:[31]}),O=function(e){return function(t){return e(t.target.value)}},g=function(e){return"did:ethr:rsk:testnet:".concat(e)};var v=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(r.useState)(null),b=Object(s.a)(d,2),v=b[0],x=b[1],y=Object(r.useState)(""),N=Object(s.a)(y,2),k=N[0],S=N[1],w=Object(r.useState)(""),C=Object(s.a)(w,2),E=C[0],_=C[1],q=Object(r.useState)(!1),I=Object(s.a)(q,2),P=I[0],V=I[1],F=Object(r.useState)(""),M=Object(s.a)(F,2),T=M[0],D=M[1],J=Object(r.useState)(""),R=Object(s.a)(J,2),U=R[0],A=R[1],B=Object(r.useState)(!1),G=Object(s.a)(B,2),K=G[0],L=G[1],W=k?g(k):"",z=function(e){return a(e?e.message:"Unhandled error")};return Object(h.jsxs)("div",{children:[Object(h.jsx)(p,{}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("h1",{children:"Email VC Issuer"}),n&&Object(h.jsxs)("p",{children:["Error: ",n]}),Object(h.jsx)("h3",{children:"1. Enable wallet"}),Object(h.jsx)("button",{onClick:function(){return m.connect().then((function(e){l(e),e.request({method:"eth_accounts"}).then((function(t){S(t[0]);var n=g(t[0]),r="https://identity.staging.rifcomputing.net",a=new j.a({authManager:new u.AuthManager({did:n,serviceUrl:r,personalSign:function(n){return e.request({method:"personal_sign",params:[t[0],n]})}}),encryptionManager:new u.EncryptionManager({getEncryptionPublicKey:function(){return e.request({method:"eth_getEncryptionPublicKey",params:[t[0]]})},decrypt:function(n){return e.request({method:"eth_decrypt",params:[n,t[0]]})}}),serviceUrl:r});x(a)}))})).catch(z)},className:"btn btn-primary",children:"enable"}),Object(h.jsx)("p",{children:k}),Object(h.jsx)("p",{children:W})," ",Object(h.jsx)("h3",{children:"2. Request email verification"}),Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("input",{type:"email",value:E,onChange:O(_),disabled:!k,placeholder:"Email address",className:"form-control"}),Object(h.jsx)("div",{className:"input-group-append",children:Object(h.jsx)("button",{id:"request",onClick:function(){return fetch("".concat(f,"/requestVerification/")+W,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({emailAddress:E})}).then((function(){V(!0)})).catch(z)},disabled:!k,className:"btn btn-primary",children:"request"})})]}),Object(h.jsx)("p",{children:P&&"Email sent"}),Object(h.jsx)("h3",{children:"3. Verify your email"}),Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("input",{type:"text",value:T,onChange:O(D),disabled:!P,placeholder:"Verification code",className:"form-control"}),Object(h.jsx)("div",{className:"input-group-append",children:Object(h.jsx)("button",{onClick:function(){return o.request({method:"personal_sign",params:[k,"Verification code: ".concat(T)]}).then((function(e){return fetch("".concat(f,"/verify/")+W,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({sig:e})})})).then((function(e){return e.json()})).then((function(e){var t=e.jwt;A(t)})).catch(z)},disabled:!P,className:"btn btn-primary",children:"verify"})})]}),Object(h.jsx)("p",{style:{wordWrap:"break-word"},children:U}),Object(h.jsx)("h3",{children:"4. Store it in your Data Vault"}),Object(h.jsx)("button",{onClick:function(){return v.create({key:"EmailVerifiableCredential",content:U}).then((function(){L(!0)})).catch(z)},disabled:!U,className:"btn btn-primary",children:"save"}),Object(h.jsx)("p",{style:{wordWrap:"break-word"},children:K&&"Saved!"}),Object(h.jsx)("h3",{children:"5. Validate in RIF Id Manager"}),Object(h.jsxs)("p",{children:["Go to the ",Object(h.jsx)("a",{href:"https://rsksmart.github.io/rif-identity-manager/",target:"_blank",rel:"noreferrer",children:"RIF Identity Manager"})]})]})})})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,521)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),x()}},[[518,1,2]]]);
//# sourceMappingURL=main.c32fe467.chunk.js.map